<div class="container-fluid">
  <div class="col-md-10 offset-md-1">
    <div class="row">
      

      <!-- img //start -->
      <div class="col-lg-6 col-md-12 img">
        <%= image_tag @event.img, width: "400", height: "300",class: "rounded mx-auto d-block img-fluid" if @event.img? %>
        <%= image_tag "http://via.placeholder.com/400x300", class: "rounded mx-auto d-block img-fluid"  unless @event.img? %> 
      </div><!-- img //end -->

      <div class="col-lg-6 col-md-12 text-center">
        <span class="text-center">
          <h5 class="event-date col-12">
            <span class="text-left"><%= @event.date %></sapn>
            <span id="interest-<%= @event.id %>">
              <%= render partial: "shared/interest", locals: {object: @event} %>
            </span>
          </h5>
        </span>
        
        <h5 class="event-title"><%= @event.title %></h5>
        <div class="event-info">演出者 <span><%= @event.artist_name %></span></div>
        <!-- <div class="event-info">票價 <span></span></div> -->
        <div class="event-info">城市 <span><%= @event.city %></span></div>
        <div class="event-info">地點 <span><%= @event.stage %></span></div>
        <div class="event-info time">時間 
          <% if @event.time == nil %>
            <span><%= @event.time %></span>
          <% elsif %>
            <span><%= @event.time.slice(0..4) %></span>
          <% end %>
        </div>
      </div>

      <div class="col-md-12"><hr id="event-hr"></div>
      <div class="col-md-12"><h3 class="event-artist"><%= @event.artist_name %></h3></div>
      
      
      <!-- details //start -->
      <% if @event.video == nil && @spotify_artist_id == nil && @event.video == "" && @spotify_artist_id == "" %>
        <div class="col-md-12">
          <div class="subtitle"><i>樂團/表演介紹</i></div>
          <p class="event-detail" id="detail" ><%= @event.detail %></p>
        </div>
      <% else %>
        <div class="col-md-7">
          <div class="subtitle"><i>樂團/表演介紹</i></div>
          <p class="event-detail" id="detail" ><%= @event.detail %></p>
        </div>
      <% end %>
      <!-- details //end -->

      <!-- YT&spotify //start -->
      <% if ( @event.video != nil && @event.video != "" ) || ( @spotify_artist_id != nil && @spotify_artist_id != "" ) %>
        <div class="col-md-5">
          <div class="subtitle"><strong><i>作品欣賞</i></strong></div>
          <div class="row">

            <!-- YT //start -->
            <% if @event.video != nil && @event.video != ""  %>
              <div class="col-md-12 col-sm-12 piece text-center">
                <div class="piece">【Youtube】</div>
                <iframe id="existing-iframe-example"
                        width="450" height="230"
                        src="<%= @event.video %>"
                        frameborder="0"
                        style="border: none"
                        allowfullscreen
                ></iframe>
              </div><br />
            <% end %>
            <!-- YT //end -->
            
            <!-- spotify //start -->
            <% if  @spotify_artist_id != nil && @spotify_artist_id != "" %> <!-- 辨識有無spotify作品 //start-->
              <div class="col-md-12 col-sm-12 piece text-center">
                <div class="piece">【Spotify】</div>

                  <!-- iframe of spotify follow button -->
                  <iframe src="https://open.spotify.com/follow/1/?uri=spotify:artist:<%= @spotify_artist_id %>&size=detail&theme=light" width="300" height="56" scrolling="no" frameborder="0" style="border:none; overflow:hidden;" allowtransparency="true"></iframe>
                  <hr>

                  <!-- iframe of spotify playlist -->
                  <iframe src="https://open.spotify.com/embed/artist/<%= @spotify_artist_id %>" width="260" height="350" frameborder="0" allowtransparency="true" allow="encrypted-media"></iframe>

              </div>
            <% end %><!-- 辨識有無spotify作品 //end-->
            <!-- spotify //end -->
          </div>
        </div>
      <% end %>
      <!-- YT&spotify //end -->

    </div> <!-- .row //end -->
  </div>
</div>

<script>
  // 自動轉換detail中的連結位置為超連結
  $('p').each(function(){
   $(this).html( $(this).html().replace(/((http|https|ftp):\/\/[\w?=&.\/-;#~%-]+(?![\w\s?&.\/;#~%"=-]*>))/g, '<a href="$1">$1</a> ') );
  });
</script>